{% extends 'base.html' %}
{% block title %}Dashboard - Result Management System{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1><i class="fas fa-home"></i> Dashboard</h1>
        <p>Welcome back, {{ session.username }}!</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(217, 119, 6, 0.2); color: var(--primary);">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_students }}</h3>
                <p>Total Students</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(16, 185, 129, 0.2); color: var(--success);">
                <i class="fas fa-book"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_subjects }}</h3>
                <p>Total Subjects</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(6, 182, 212, 0.2); color: var(--info);">
                <i class="fas fa-chart-bar"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_results }}</h3>
                <p>Total Results</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(217, 119, 6, 0.2); color: var(--warning);">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
                <h3>{{ pending_results }}</h3>
                <p>Pending Approval</p>
            </div>
        </div>
    </div>

    <div class="dashboard-grid">
        <div class="dashboard-card">
            <h2><i class="fas fa-history"></i> Recent Activities</h2>
            <div class="activity-list">
                {% for activity in recent_activities %}
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-circle"></i>
                    </div>
                    <div class="activity-content">
                        <strong>{{ activity.user }}</strong> {{ activity.action }}
                        {% if activity.details %}
                        <br><small>{{ activity.details }}</small>
                        {% endif %}
                        <div class="activity-time">
                            <i class="fas fa-clock"></i> {{ activity.timestamp }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="dashboard-card">
            <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
            <div class="quick-actions">
                {% if session.role in ['admin', 'teacher'] %}
                <a href="{{ url_for('add_student') }}" class="action-btn">
                    <i class="fas fa-user-plus"></i>
                    <span>Add Student</span>
                </a>
                <a href="{{ url_for('add_result') }}" class="action-btn">
                    <i class="fas fa-plus-circle"></i>
                    <span>Add Result</span>
                </a>
                <a href="{{ url_for('import_results') }}" class="action-btn">
                    <i class="fas fa-file-import"></i>
                    <span>Import Results</span>
                </a>
                {% endif %}
                <a href="{{ url_for('export_results') }}" class="action-btn">
                    <i class="fas fa-file-export"></i>
                    <span>Export Results</span>
                </a>
                <a href="{{ url_for('reports') }}" class="action-btn">
                    <i class="fas fa-chart-line"></i>
                    <span>View Reports</span>
                </a>
                {% if session.role == 'admin' %}
                <a href="{{ url_for('add_user') }}" class="action-btn">
                    <i class="fas fa-user-shield"></i>
                    <span>Add User</span>
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}